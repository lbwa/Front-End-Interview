<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Front End Interview | Hybrid</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/front-end-interview/assets/css/30.styles.fd504cf3.css" as="style"><link rel="preload" href="/front-end-interview/assets/js/app.db72fc95.js" as="script"><link rel="preload" href="/front-end-interview/assets/js/26.a505ed06.js" as="script"><link rel="prefetch" href="/front-end-interview/assets/js/12.3c29124f.js"><link rel="prefetch" href="/front-end-interview/assets/js/0.bf775a11.js"><link rel="prefetch" href="/front-end-interview/assets/js/1.1190d708.js"><link rel="prefetch" href="/front-end-interview/assets/js/2.5de7ca40.js"><link rel="prefetch" href="/front-end-interview/assets/js/3.f70d72bc.js"><link rel="prefetch" href="/front-end-interview/assets/js/4.a541e70b.js"><link rel="prefetch" href="/front-end-interview/assets/js/5.5c894db1.js"><link rel="prefetch" href="/front-end-interview/assets/js/6.98ce2f58.js"><link rel="prefetch" href="/front-end-interview/assets/js/7.c976c70d.js"><link rel="prefetch" href="/front-end-interview/assets/js/8.69b104a6.js"><link rel="prefetch" href="/front-end-interview/assets/js/9.082b8ac0.js"><link rel="prefetch" href="/front-end-interview/assets/js/10.a347006c.js"><link rel="prefetch" href="/front-end-interview/assets/js/11.4f688f0a.js"><link rel="prefetch" href="/front-end-interview/assets/js/13.66c864b0.js"><link rel="prefetch" href="/front-end-interview/assets/js/14.13130231.js"><link rel="prefetch" href="/front-end-interview/assets/js/15.dcc3d7af.js"><link rel="prefetch" href="/front-end-interview/assets/js/16.21fc58fd.js"><link rel="prefetch" href="/front-end-interview/assets/js/17.2b64bdc6.js"><link rel="prefetch" href="/front-end-interview/assets/js/18.d801340d.js"><link rel="prefetch" href="/front-end-interview/assets/js/19.5a161372.js"><link rel="prefetch" href="/front-end-interview/assets/js/20.ee552e08.js"><link rel="prefetch" href="/front-end-interview/assets/js/21.8031b3ff.js"><link rel="prefetch" href="/front-end-interview/assets/js/22.8ffcc061.js"><link rel="prefetch" href="/front-end-interview/assets/js/23.86599a03.js"><link rel="prefetch" href="/front-end-interview/assets/js/24.139449ee.js"><link rel="prefetch" href="/front-end-interview/assets/js/25.3345fd47.js"><link rel="prefetch" href="/front-end-interview/assets/js/27.58a5efca.js"><link rel="prefetch" href="/front-end-interview/assets/js/28.78d7c9b3.js"><link rel="prefetch" href="/front-end-interview/assets/js/29.b53cf265.js">
    <link rel="stylesheet" href="/front-end-interview/assets/css/30.styles.fd504cf3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/front-end-interview/" class="home-link router-link-active"><!----><span class="site-name">
      Front End Interview
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-interview/" class="nav-link">主页</a></div><div class="nav-item"><a href="/front-end-interview/SUMMARY.html" class="nav-link">目录</a></div><a href="https://github.com/lbwa/front-end-interview" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-interview/" class="nav-link">主页</a></div><div class="nav-item"><a href="/front-end-interview/SUMMARY.html" class="nav-link">目录</a></div><a href="https://github.com/lbwa/front-end-interview" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>进阶</span><!----></p><ul class="sidebar-group-items"><li><a href="/front-end-interview/advance/adv-virtual-dom.html" class="sidebar-link">virtual DOM</a></li><li><a href="/front-end-interview/advance/adv-mvvm/adv-mvvm.html" class="sidebar-link">MVVM 架构模式</a></li><li><a href="/front-end-interview/advance/adv-component.html" class="sidebar-link">组件化</a></li><li><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html" class="active sidebar-link">Hybrid</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html#hybrid-存在价值" class="sidebar-link">hybrid 存在价值</a></li><li class="sidebar-sub-header"><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html#webview" class="sidebar-link">webview</a></li><li class="sidebar-sub-header"><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html#file-协议" class="sidebar-link">file 协议</a></li><li class="sidebar-sub-header"><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html#具体实现" class="sidebar-link">具体实现</a></li><li class="sidebar-sub-header"><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html#hybrid-与-html5-对比" class="sidebar-link">hybrid 与 HTML5 对比</a></li><li class="sidebar-sub-header"><a href="/front-end-interview/advance/adv-hybrid/adv-hybrid.html#前端和客户端通信" class="sidebar-link">前端和客户端通信</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="hybrid"><a href="#hybrid" aria-hidden="true" class="header-anchor">#</a> Hybrid</h1><p><code>hybrid</code> 指前端和客户端的混合开发。客户端承载前端的内容。客户端是前端内容的容器。</p><h2 id="hybrid-存在价值"><a href="#hybrid-存在价值" aria-hidden="true" class="header-anchor">#</a> hybrid 存在价值</h2><ol><li><p>可以 <em><strong>快速</strong></em> 迭代更新 - 核心意义</p><ul><li>因为 <code>hybrid</code> 是使用前端三大语言开发，权限低，无法获取手机的隐私等安全性信息，那么 <code>hybrid</code> 页面更新是 <em><strong>不需要 <code>app</code> 审核</strong></em> 的。</li></ul></li><li><p>与 <code>Native</code> 应用体验基本类似</p></li><li><p>开发成本低，双端可以共用一套代码</p></li></ol><h2 id="webview"><a href="#webview" aria-hidden="true" class="header-anchor">#</a> webview</h2><ol><li><p><code>app</code> 中非必要组件，一类组件的统称。</p></li><li><p>用于加载 <code>HTML5</code> 页面，即一个小型浏览器精简内核。</p></li></ol><h2 id="file-协议"><a href="#file-协议" aria-hidden="true" class="header-anchor">#</a> file 协议</h2><p><code>file</code> 协议用于本地文件请求，相较于 <code>http(s)</code> 请求的 <em><strong>速度快</strong></em> 得多。</p><h2 id="具体实现"><a href="#具体实现" aria-hidden="true" class="header-anchor">#</a> 具体实现</h2><ol><li><p>选型</p><ul><li><p>使用 <code>Native</code>：追求极致体验，变化不频繁的场景。</p></li><li><p>使用 <code>hybrid</code>：体验要求高，且变化频繁的场景（如新闻详情页）。</p></li><li><p>使用 <code>HTML5</code>：体验无要求，不常用的页面（如反馈等页面）。</p></li></ul></li><li><p>流程</p><ol><li><p>前端做好静态页面（<code>HTML</code>、<code>CSS</code>、<code>JS</code>），将静态文件移交客户端开发。</p></li><li><p>客户端开发以文件形式嵌入存储在 <code>app</code> 中。</p></li><li><p>客户端在一个 <code>webview</code> 中使用 <code>file</code> 协议读取本地静态文件。</p><p><img src="data:image/png;base64,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" alt="hybrid"></p></li></ol></li><li><p>更新</p><ul><li><p><code>app</code> 发布后，如何更新静态文件？</p><p>因为前端语言都存在于客户端容器内，那么此时的前端语言是没有权限更新静态文件的，只有客户端有权限来完成更新静态文件的操作。</p><ol><li><p>在服务端维护静态文件压缩包和版本号。</p></li><li><p>在一个时机被触发时（如启动 App 时），客户端主动去请求 <code>server</code> 比对版本号。</p></li><li><p>仅在版本号不一致的情况下下载最新的静态文件压缩包，并在客户端解压，即可得到新的静态文件。</p><p><img src="/front-end-interview/assets/img/hybrid-update.8f2dd4ab.png" alt="hybrid-update"></p></li></ol></li><li><p>静态页面如何动态获取文字内容（如新闻，作者等内容）？</p><p>见本章 - 前端和客户端通信</p></li></ul></li></ol><h2 id="hybrid-与-html5-对比"><a href="#hybrid-与-html5-对比" aria-hidden="true" class="header-anchor">#</a> hybrid 与 HTML5 对比</h2><ul><li><p><code>hybrid</code> 优点</p><ol><li><p>可快速迭代更新</p></li><li><p>与 <code>Native</code> 应用体验基本相似</p></li></ol></li><li><p><code>hybrid</code> 缺点</p><ol><li><p>开发成本高。联调、测试、debug 等都有很高的成本。</p></li><li><p>运维成本高。</p></li></ol></li><li><p>适用场景</p><ol><li><p><code>hybrid</code> 适用于产品型场景，它要求稳定，体验要求高，迭代频繁</p></li><li><p><code>HTML5</code> 侧重活动运营，如单次运营活动或不常用的功能（如反馈页面）。</p></li></ol></li></ul><h2 id="前端和客户端通信"><a href="#前端和客户端通信" aria-hidden="true" class="header-anchor">#</a> 前端和客户端通信</h2><ul><li><p>静态页面如何动态获取文字内容（如新闻，作者等内容）？</p><ol><li><p><code>ajax</code> 的局限性。</p><ul><li><p>app 是本地读取的静态文件，是 <code>file</code> 协议。若 <code>ajax</code> 请求获取，则是 <code>http(s)</code> 协议，三源之一（协议）不一致将导致客户端因跨域而拒绝解析返回的数据（<a href="https://lbwa.github.io/2018/04/19/Cross-domain-solution/" target="_blank" rel="noopener noreferrer">extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）。</p></li><li><p>另外，可通过跨域解决方案（<a href="https://lbwa.github.io/2018/04/19/Cross-domain-solution/" target="_blank" rel="noopener noreferrer">extension<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）解决跨域问题。但是，<code>ajax</code><em><strong>请求速度慢</strong></em>，需要经历打开目标页才能启动 JS 请求，请求下完成后再渲染得到的内容。</p></li></ul></li><li><p>客户端获取更新文字内容，与 1 不同的是，客户端更新内容可 <em><strong>提前获取</strong></em>。</p><ul><li>比如可在还没有进入到目标内容页的情况下，就可以提前由客户端发起请求来 <em><strong>预取</strong></em> 内容。</li></ul></li></ol></li></ul><h3 id="js-和客户端通信的基本形式"><a href="#js-和客户端通信的基本形式" aria-hidden="true" class="header-anchor">#</a> JS 和客户端通信的基本形式</h3><p>（原理类似 <code>JSONP</code> 跨域解决方案的形式。）</p><ol><li><p>JS 向客户端传递参数和回调函数。</p></li><li><p>客户端通过回调函数返回内容。</p></li></ol><h3 id="schema-协议简介和使用"><a href="#schema-协议简介和使用" aria-hidden="true" class="header-anchor">#</a><code>schema</code> 协议简介和使用</h3><p>在前端中，除了 <code>http(s)</code> 协议与 <code>file</code> 协议，还有 <code>schema</code> 协议是用于前端和客户通信的协议。</p><div class="language- line-numbers-mode"><pre class="language-text"><code>/* 格式形如: */
weixin://dl/scan
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>schema</code> 协议的使用逻辑示例：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 以下省略了权限验证</span>
<span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span>
iframe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>

<span class="token comment">// iframe 通过 `schema` 协议访问客户端</span>
<span class="token comment">// a. 无参数访问</span>
iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'weixin://dl/scan'</span>

<span class="token comment">// b. 传参访问</span>
window<span class="token punctuation">[</span><span class="token string">'_wx_scan_callback_'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
<span class="token punctuation">}</span>
iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'weixin://dl/scan?keyword=value&amp;callback=_wx_scan_callback_'</span>
<span class="token comment">// 返回 _wx_scan_callback({ key: value })，即调用 _wx_scan_callback 函数解析其中的数据</span>

<span class="token keyword">const</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body <span class="token operator">||</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
<span class="token comment">// 异步销毁 iframe，防止内存泄漏</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
  iframe <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="schema-使用的封装"><a href="#schema-使用的封装" aria-hidden="true" class="header-anchor">#</a><code>schema</code> 使用的封装</h3><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_invoke</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// excluding verifying params data and callback validity</span>

  <span class="token comment">// package schema url</span>
  <span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token template-string"><span class="token string">`schema://utils/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>

  <span class="token comment">// add params to url</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    schema <span class="token operator">=</span> schema <span class="token operator">+</span> <span class="token string">'?'</span>
    <span class="token keyword">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> keys<span class="token punctuation">.</span>length

    keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>dataKey <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>dataKey <span class="token operator">!==</span> keys<span class="token punctuation">[</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        schema <span class="token operator">+=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dataKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">[</span>dataKey<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;`</span></span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        schema <span class="token operator">+=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dataKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">[</span>dataKey<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">const</span> callbackName <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'String'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    callbackName <span class="token operator">=</span> callback
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// declare a unique function in window when param callback is a function</span>
    <span class="token comment">// It will be called when schema respond</span>
    callbackName <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    window<span class="token punctuation">[</span>callbackName<span class="token punctuation">]</span> <span class="token operator">=</span> callback
  <span class="token punctuation">}</span>

  schema <span class="token operator">+=</span> <span class="token template-string"><span class="token string">`&amp;callback=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callbackName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
  <span class="token comment">// package schema url ending</span>

  <span class="token comment">// perform request</span>
  <span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span>
  iframe<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>
  iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> schema
  <span class="token keyword">const</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body <span class="token operator">||</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagNames</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>

  <span class="token comment">// Once schema request has been invoked, we can destroy iframe</span>
  <span class="token comment">// It's used to prevent too many iframe to memory overflow</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>iframe<span class="token punctuation">)</span>
    iframe <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// expose API</span>
window<span class="token punctuation">.</span>invoke <span class="token operator">=</span> <span class="token punctuation">{</span>
  scan<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_invoke</span><span class="token punctuation">(</span><span class="token string">'scan'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 

  share<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_invoke</span><span class="token punctuation">(</span><span class="token string">'share'</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// invoke API</span>
window<span class="token punctuation">.</span>invoke<span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>errno <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something right</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Request fail, errno is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>errno<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="内置-schema-协议调用文件上线"><a href="#内置-schema-协议调用文件上线" aria-hidden="true" class="header-anchor">#</a> 内置 <code>schema</code> 协议调用文件上线</h3><ul><li><p>将封装的<code>schema</code> 协议调用代码打包为 <code>invoke.js</code>，内置到客户端。</p></li><li><p>客户端每次启动 <code>webview</code>，都默认执行 <code>invoke.js</code>。</p><ul><li><p>本地加载免去了网络加载时间</p></li><li><p>本地加载更安全。因为没有网络请求，防范了因抓包造成的黑客攻击。</p></li></ul></li></ul></div><div class="content edit-link"><!----><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">6/6/2018, 9:12:17 AM</span></div></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/front-end-interview/advance/adv-component.html" class="prev">
          组件化
        </a></span><!----></p></div></div></div></div>
    <script src="/front-end-interview/assets/js/26.a505ed06.js" defer></script><script src="/front-end-interview/assets/js/app.db72fc95.js" defer></script>
  </body>
</html>
