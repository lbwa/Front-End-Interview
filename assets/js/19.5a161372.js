(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{164:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),n("p",[t._v("在 JS 执行实行单线程的原因是避免 DOM 渲染冲突。")]),t._m(7),t._m(8),n("p",[t._v("输出结果为：")]),t._m(9),t._m(10),n("ul",[t._m(11),n("li",[t._m(12),n("ul",[n("li",[t._v("完成当前宏任务后，查询当前微任务队列为空（此时数据未返回，"),n("code",[t._v("Promise")]),t._v(" 为 "),n("code",[t._v("pending")]),t._v(" 状态，回调函数"),n("strong",[t._v("未加入")]),t._v("到微任务队列中（"),n("a",{attrs:{href:"https://promisesaplus.com/#point-26",target:"_blank",rel:"noopener noreferrer"}},[t._v("来源"),n("OutboundLink")],1),t._v("）），执行下一个宏任务（调用 "),n("code",[t._v("fn")]),t._v(" 函数）输出 "),n("code",[t._v("other event loop")]),t._v("，调用 "),n("code",[t._v("fn")]),t._v(" 函数即开启新一轮事件循环。待之后 "),n("code",[t._v("Ajax")]),t._v(" 数据返回时，将回调函数插入当前事件循环的微任务队列的最末端。在插入回调函数的当前事件循环中，清空微任务队列时，将会调用该回调函数，输出 "),n("code",[t._v("{/* 返回的 JSON 数据 */}")]),t._v(" 请求返回的数据。")])])])]),n("p",[t._v("关于事件循环的解析见章节 —— "),n("router-link",{attrs:{to:"js-event-loops.html"}},[t._v("事件循环")])],1),t._m(13),n("p",[t._v("注："),n("code",[t._v("HTML5")]),t._v(" 中存在 "),n("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/workers.html#workers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web workers"),n("OutboundLink")],1),t._v(" 支持多线程，但不能访问 "),n("code",[t._v("DOM")]),t._v("。")]),t._m(14),t._m(15),t._m(16),t._m(17),n("p",[t._v("对于事件循环的解析见章节 "),n("router-link",{attrs:{to:"js-event-loops.html"}},[t._v("event loop")]),t._v("。")],1),t._m(18),t._m(19),t._m(20),n("ul",[n("li",[t._m(21),n("ul",[t._m(22),t._m(23),n("li",[n("p",[t._v("很好地体现了"),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Open/closed_principle",target:"_blank",rel:"noopener noreferrer"}},[t._v("开（放）（封）闭原则"),n("OutboundLink")],1),t._v("（程序对于拓展是开放的，对于修改是封闭的）")]),t._m(24)])])]),t._m(25)]),t._m(26),t._m(27),t._m(28),t._m(29),n("p",[t._v("章节 - "),n("router-link",{attrs:{to:"js-promise.html"}},[t._v("Promise 对象")])],1),t._m(30),n("p",[t._v("章节 - "),n("router-link",{attrs:{to:"js-async-function.html"}},[t._v("异步函数")])],1),t._m(31),t._m(32)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"异步执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步执行","aria-hidden":"true"}},[this._v("#")]),this._v(" 异步执行")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"javascript-中的异步执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript-中的异步执行","aria-hidden":"true"}},[this._v("#")]),this._v(" JavaScript 中的异步执行")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("本章主要叙述了 "),s("code",[this._v("JavaScript")]),this._v(" 中异步操作所解决的问题，异步的实现方式等一系列相关内容。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("特别指明")]),this._v("：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("p",[t._v("现阶段所有异步解决方案的本质仍是单线程（"),n("code",[t._v("one thread")]),t._v("），这是由避免 JS 因多线程导致多处同时操作 DOM ，进而避免了导致渲染冲突的本质所决定的。")])]),n("li",[n("p",[t._v("所有的异步解决方案重点是"),n("strong",[t._v("避免")]),t._v("不必要的代码阻塞（如 "),n("code",[t._v("Ajax")]),t._v(" 请求等待）。即异步解决方案"),n("strong",[t._v("依靠")]),t._v("事件循环的原理"),n("strong",[t._v("优化")]),t._v("了代码的"),n("strong",[t._v("执行顺序")]),t._v("。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"单线程和异步有什么关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单线程和异步有什么关系","aria-hidden":"true"}},[this._v("#")]),this._v(" 单线程和异步有什么关系")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("单线程通俗上解释为当前 JS 执行只有一个线程（"),s("code",[this._v("thread")]),this._v("），即只有一个执行上下文栈（"),s("code",[this._v("execution context stack")]),this._v("，亦称调用栈（"),s("code",[this._v("call stack")]),this._v("）），即只关注一件事执行。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("单线程在 JS 中除了普通的从上至下一次执行外，另外实现了一种执行方式，就是异步执行。异步执行加快了执行 JS 模块的速度，比如在 "),s("code",[this._v("Ajax")]),this._v(" 异步请求时，可以不用等待数据返回就继续执行下面的代码，待数据返回后再执行回调函数。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("getData")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("url"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token function"}},[t._v("reject")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'You have to input request address by String type'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("open")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'GET'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[t._v("`")]),n("span",{attrs:{class:"token interpolation"}},[n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("url"),n("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{attrs:{class:"token string"}},[t._v("`")])]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// true 为异步请求")]),t._v("\n    xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),n("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("4")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),n("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),n("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("300")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),n("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("304")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token function"}},[t._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{attrs:{class:"token function"}},[t._v("reject")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Request failed'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    xhr"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("send")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token function"}},[t._v("getData")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'./data.json'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("error")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("then")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'I am 1st logger in 1st event loop'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("fn")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'I am in other event loop'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("10")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nconsole"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'I am 2nd logger in 1st event loop'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 情况 1")]),t._v("\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("33")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("25.343")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("I")]),t._v(" am "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("st logger "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("st event loop\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("33")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("25.346")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("I")]),t._v(" am "),n("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("nd logger "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("st event loop\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("33")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("25.373")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token comment"}},[t._v("/* 返回的 JSON 数据 */")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("33")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("25.460")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("I")]),t._v(" am "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" other event loop\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 情况 2")]),t._v("\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("34")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("35.236")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("I")]),t._v(" am "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("st logger "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("st event loop\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("34")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("35.242")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("I")]),t._v(" am "),n("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("nd logger "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("st event loop\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("34")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("35.439")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("I")]),t._v(" am "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" other event loop\n"),n("span",{attrs:{class:"token number"}},[t._v("16")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("34")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token number"}},[t._v("36.874")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token comment"}},[t._v("/* 返回的 JSON 数据 */")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("示例中，"),n("code",[t._v("Ajax")]),t._v(" 为异步请求（"),n("code",[t._v("web API")]),t._v(" 属于 "),n("code",[t._v("I/O")]),t._v(" 类任务源，是宏任务，并在当前调用栈中立即执行），"),n("code",[t._v("setTimeout")]),t._v(" 中的函数为异步执行。"),n("code",[t._v("Ajax")]),t._v(" 在请求后弹出调用栈（因为是异步请求，否则同步请求将阻塞接下来的代码执行），"),n("strong",[t._v("暂存")]),t._v("该请求回调，待请求返回后将回调函数"),n("strong",[t._v("加入")]),t._v("彼时的事件循环的微任务队列（因为示例中是用 then 包裹的回调函数）。继续执行下文代码，至 "),n("code",[t._v("setTimeout")]),t._v(" 时，"),n("code",[t._v("setTimeout")]),t._v(" 作为任务分发器，分发调用 "),n("code",[t._v("fn")]),t._v(" 的任务，此处"),n("strong",[t._v("暂存")]),n("code",[t._v("fn")]),t._v(" 函数，建立一个 10ms 计时器，10ms 后 "),n("code",[t._v("fn")]),t._v(" 函数"),n("strong",[t._v("加入")]),t._v("当前宏任务队列等待执行。在之前的 10ms 计时器建立后，"),n("code",[t._v("setTimeout")]),t._v(" 弹出调用栈，执行下文代码，输出 "),n("code",[t._v("2nd logger")]),t._v("。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("li",[n("p",[t._v("在输出 "),n("code",[t._v("2nd logger")]),t._v(" 之前数据就已经返回：")]),n("ul",[n("li",[t._v("待当前宏任务执行完成（即示例中 "),n("code",[t._v("script")]),t._v(" 宏任务）后，开始清空微任务队列，清空微任务队列时，将会调用回调函数，输出 "),n("code",[t._v("{/* 返回的 JSON 数据 */}")]),t._v(" 请求返回的数据，执行下一个宏任务（执行 "),n("code",[t._v("fn")]),t._v(" 函数，输出 "),n("code",[t._v("other event loop")]),t._v("），调用  "),n("code",[t._v("fn")]),t._v(" 函数即开启新一轮事件循环。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在输出 "),s("code",[this._v("2nd logger")]),this._v(" 之后数据才返回：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("注：JS 中的异步执行"),n("strong",[t._v("仍是单线程的")]),t._v("，不是多线程。异步为解决不必要的阻塞而生，此处的异步重点是优化了代码的"),n("strong",[t._v("执行顺序")]),t._v("。"),n("strong",[t._v("避免")]),t._v("在执行 JS 代码中"),n("strong",[t._v("不必要的阻塞")]),t._v("。即异步执行就是单线程执行的一种"),n("strong",[t._v("优化")]),t._v("解决方案。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("异步执行避免了不必要的代码阻塞")])]),s("li",[s("p",[this._v("常规异步执行带来的问题")]),s("ul",[s("li",[s("p",[this._v("降低了代码可读性，因为代码并不是按照书写顺序执行")])]),s("li",[s("p",[this._v("在没有 "),s("code",[this._v("Promise")]),this._v(" 对象之前，callback 易耦合，不容易模块化")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"事件循环-event-loop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件循环-event-loop","aria-hidden":"true"}},[this._v("#")]),this._v(" 事件循环 event loop")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("JavaScript")]),this._v(" 中实现异步执行的具体解决方案就是 "),s("code",[this._v("event loop")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"jquery-中的-deferred"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jquery-中的-deferred","aria-hidden":"true"}},[this._v("#")]),this._v(" jQuery 中的 Deferred")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("标准中的 "),s("code",[this._v("Promise")]),this._v(" 对象由 "),s("code",[this._v("jQuery")]),this._v(" 中的 "),s("code",[this._v("Deferred")]),this._v(" 对象演变而来。")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("$"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("ajax")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'/data.json'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("done")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// do something good")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("fail")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// print error to console drawer")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("Deferred")]),this._v(" 对象的革新：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("从写法上杜绝 callback hell")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("本质是语法糖，但解耦了回调函数")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("从外部就可拓展模块功能，从外部不能也不允许修改模块内部代码。")])]),s("li",[s("p",[this._v("在仅仅只是拓展程序功能时，总是应该"),s("strong",[this._v("倾向于添加")]),this._v("一个新的模块，而不是修改模块内部代码。这样可以大大避免因修改内部模块而导致新的回归测试。同时，修改模块内部代码有引入新的 BUG 的风险。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("利用 "),s("code",[this._v("Deferred")]),this._v(" 对象简单实现异步链式操作")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("（实现 "),s("code",[this._v("$.ajax('data.json').done(...)")]),this._v(" 逻辑）")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("waitHandle")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 创建一个 deferred 对象")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" deferred "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" $"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("Deferred")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token function-variable function"}},[t._v("wait")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deferred"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token function-variable function"}},[t._v("task")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// do something")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// do something else")]),t._v("\n\n      console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'done'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 以下简化判断 resolve 条件和 reject 条件的逻辑")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// resolve")]),t._v("\n      deferred"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// reject")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// deferred.reject()")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// trigger，异步执行 task")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("task"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1000")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 不直接返回 deferred 对象是为了 开闭原则，保证外部不能调用 deferred.resolve")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 或 deferred.reject")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" deferred"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("promise")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 返回一个 promise 对象（标准中的 Promise 对象的前身）")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// waitHandle 对外返回一个 promise 对象，便于链式操作，即便于拓展")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("wait")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deferred"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wh "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("waitHandle")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// wh 为一个 promise 对象（标准中的 Promise 对象的前身）")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 将 wh 包装一下再使用")]),t._v("\n$"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("when")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wh"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("fail")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Invoking failed'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("done")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Invoking successful'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("p",[n("code",[t._v("Promise")]),t._v(" 对象（标准中的 "),n("code",[t._v("Promise")]),t._v(" 对象的前身）和 "),n("code",[t._v("Deferred")]),t._v(" 对象的区别")]),n("ul",[n("li",[n("p",[n("code",[t._v("Deferred")]),t._v(" 对象可在模块外部不仅能被动监听，还能再次被主动修改状态（违背开闭原则）。")])]),n("li",[n("p",[n("code",[t._v("Promise")]),t._v(" 对象只能被动监听，不能主动修改（遵循开闭原则）。")]),n("ul",[n("li",[t._v("演变出 "),n("code",[t._v("ECMAScript")]),t._v(" 标准中的 "),n("code",[t._v("Promise")]),t._v(" 对象，"),n("code",[t._v("Promise")]),t._v(" 对象的实例中的状态一旦由 "),n("code",[t._v("pending")]),t._v(" 转变为 "),n("code",[t._v("resolved")]),t._v(" 或 "),n("code",[t._v("rejected")]),t._v(" 后，就不能再被改变了。")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"promise-基本原理与使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise-基本原理与使用","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise 基本原理与使用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"promise-对象的再封装-——-async-await"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise-对象的再封装-——-async-await","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise 对象的再封装 —— async/await")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"总结当前-js-解决异步的方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结当前-js-解决异步的方案","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结当前 JS 解决异步的方案")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("Promise")])]),s("li",[s("p",[this._v("async/await")])])])}],!1,null,null,null);s.default=e.exports}}]);