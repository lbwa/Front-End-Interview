(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{161:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),e("ol",[t._m(9),e("li",[e("p",[t._v("根据 "),e("code",[t._v("CSS")]),t._v(" 生成 "),e("code",[t._v("CSSOM")]),t._v("（"),e("a",{attrs:{href:"https://www.w3.org/TR/cssom-view/",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C"),e("OutboundLink")],1),t._v("）")])]),t._m(10),t._m(11),t._m(12)]),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),e("p",[t._v("因为不会阻塞页面的渲染。在下载并执行外部 JS 文件时，此时页面的渲染已经完成。此举让页面更快的完成渲染，减少用户等待时间（渲染未完成时，是白屏）。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"页面加载原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#页面加载原理","aria-hidden":"true"}},[this._v("#")]),this._v(" 页面加载原理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"加载资源的形式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载资源的形式","aria-hidden":"true"}},[this._v("#")]),this._v(" 加载资源的形式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("输入 "),s("code",[this._v("url")]),this._v(" （或跳转页面）加载 "),s("code",[this._v("HTML")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[this._v("https://example.com\n")])]),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("加载 "),s("code",[this._v("HTML")]),this._v(" 中的静态资源")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-html line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("type")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("src")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("./target.js"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{attrs:{class:"token script language-javascript"}}),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token tag"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),e("span",{attrs:{class:"token attr-name"}},[t._v("src")]),e("span",{attrs:{class:"token attr-value"}},[e("span",{attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("a.png"),e("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"加载（下载）资源的过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载（下载）资源的过程","aria-hidden":"true"}},[this._v("#")]),this._v(" 加载（下载）资源的过程")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[e("p",[t._v("浏览器根据 "),e("code",[t._v("DNS")]),t._v(" 服务器得到域名的 "),e("code",[t._v("IP")]),t._v(" 地址")])]),e("li",[e("p",[t._v("向该 "),e("code",[t._v("IP")]),t._v(" 的服务器发送请求（"),e("code",[t._v("http")]),t._v(" 或 "),e("code",[t._v("https")]),t._v("）")])]),e("li",[e("p",[t._v("服务端接受请求，处理之后并返回请求")])]),e("li",[e("p",[t._v("客户端得到服务端返回的内容")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"浏览器渲染页面的过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器渲染页面的过程","aria-hidden":"true"}},[this._v("#")]),this._v(" 浏览器渲染页面的过程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("根据 "),s("code",[this._v("HTML")]),this._v(" 结构生成 "),s("code",[this._v("DOM")]),this._v(" 树结构（DOM 的数据结构是 树（Tree） 类型）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("将 "),s("code",[this._v("DOM")]),this._v(" 和 "),s("code",[this._v("CSSOM")]),this._v(" 整合形成 "),s("code",[this._v("Render")]),this._v(" 树")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("根据 "),s("code",[this._v("Render")]),this._v(" 树开始渲染并展示结果")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("p",[t._v("特别地，在"),e("strong",[t._v("下载并执行")]),e("code",[t._v("script")]),t._v(" 标签时，因为不确定是否包含修改 "),e("code",[t._v("DOM")]),t._v(" 的 JS 代码，浏览器默认将 "),e("strong",[t._v("阻塞")]),t._v(" 当前渲染。")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("注：对于第 5 点，可在 "),e("code",[t._v("script")]),t._v(" 标签上使用 "),e("code",[t._v("defer")]),t._v(" 或 "),e("code",[t._v("async")]),t._v(" 来解除浏览器在下载 JS 代码的阻塞渲染行为，或者在 "),e("code",[t._v("body")]),t._v(" 的结尾处（即等到 DOM 树渲染完成）引入外部 JS 文件。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("defer")]),this._v(" 属性指定浏览器不阻塞渲染并继续下载 JS 代码，但等到 "),s("code",[this._v("DOM")]),this._v(" 树建立后才执行下载完成的代码。"),s("code",[this._v("async")]),this._v(" 属性指定浏览器不阻塞渲染并继续下载 JS 代码，并在下载完成后立即执行下载完成的 JS 代码。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"拓展：外部-css-在-head-标签中引入的原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拓展：外部-css-在-head-标签中引入的原因","aria-hidden":"true"}},[this._v("#")]),this._v(" 拓展：外部 CSS 在 "),s("code",[this._v("head")]),this._v(" 标签中引入的原因")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("（下文渲染 "),e("code",[t._v("DOM")]),t._v(" 树指的是 "),e("code",[t._v("DOM")]),t._v(" 树与 "),e("code",[t._v("CSSOM")]),t._v("（可能为浏览器默认样式） 结合生成 "),e("code",[t._v("Render")]),t._v(" 树）")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("浏览器是自上而下解析 "),e("code",[t._v("HTML")]),t._v(" 文档的，那么在渲染 "),e("code",[t._v("DOM")]),t._v(" 树之前，浏览器就已经建立了 "),e("code",[t._v("CSSOM")]),t._v(" 树，那么在渲染 "),e("code",[t._v("DOM")]),t._v(" 树（即目的是生成 "),e("code",[t._v("Render")]),t._v(" 树）时，浏览器将直接根据 "),e("code",[t._v("CSSOM")]),t._v(" 树并结合 "),e("code",[t._v("DOM")]),t._v(" 树生成 "),e("code",[t._v("render")]),t._v(" 树，此举"),e("strong",[t._v("避免")]),e("code",[t._v("DOM")]),t._v(" 树先应用浏览器默认样式，之后再应用外部样式表的样式这样的"),e("strong",[t._v("多次应用样式")]),t._v("的情况发生。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可以对比一下，若在 "),s("code",[this._v("body")]),this._v(" 标签的最后引入外部 CSS 文件的话，那么在渲染完 "),s("code",[this._v("DOM")]),this._v(" 树（此时是浏览器的默认样式）之后，浏览器又要重新将 "),s("code",[this._v("DOM")]),this._v(" 树应用样式。这样可能导致性能问题，并且用户体验太差，可能因样式变化导致的页面跳动等问题。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("结论：在 "),e("code",[t._v("head")]),t._v(" 标签中引入外部 CSS 文件，是为了保证浏览器在渲染 "),e("code",[t._v("DOM")]),t._v(" 树时，可以"),e("strong",[t._v("一次性")]),t._v("渲染完成，并生成 "),e("code",[t._v("Render")]),t._v(" 树。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"拓展：外部-js-在-body-标签结尾处引入的原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拓展：外部-js-在-body-标签结尾处引入的原因","aria-hidden":"true"}},[this._v("#")]),this._v(" 拓展：外部 JS 在 "),s("code",[this._v("body")]),this._v(" 标签结尾处引入的原因")])}],!1,null,null,null);s.default=n.exports}}]);