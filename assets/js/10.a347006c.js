(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{173:function(s,t,n){"use strict";n.r(t);var a=n(0),e=Object(a.a)({},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[s._m(0),s._m(1),n("p",[s._v("（主要参考 "),n("a",{attrs:{href:"https://promisesaplus.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("promise 标准"),n("OutboundLink")],1),s._v("）")]),s._m(2),s._m(3),s._m(4),s._m(5),s._m(6),n("ul",[s._m(7),s._m(8),s._m(9),s._m(10),n("li",[n("p",[n("code",[s._v("catch")]),s._v(" 函数本质是 "),n("code",[s._v("then(undefined, onRejected)")]),s._v(" 的"),n("strong",[s._v("语法糖")]),s._v("（"),n("a",{attrs:{href:"https://www.ecma-international.org/ecma-262/8.0/#sec-promise.prototype.catch",target:"_blank",rel:"noopener noreferrer"}},[s._v("ES8"),n("OutboundLink")],1),s._v("）。另外，"),n("code",[s._v("catch")]),s._v(" 本意是抓住（错误），那么逻辑上讲 "),n("code",[s._v("catch")]),s._v(" 本身就应该返回一个 "),n("code",[s._v("resolved")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象，其中 "),n("code",[s._v("resolved")]),s._v(" 状态表示"),n("strong",[s._v("已经处理")]),s._v("了先前的 "),n("code",[s._v("rejected")]),s._v(" 的 "),n("code",[s._v("Promise")]),s._v(" 对象。")])])]),s._m(11),s._m(12),s._m(13),s._m(14),s._m(15),n("p",[s._v("另外，因为 "),n("a",{attrs:{href:"https://www.ecma-international.org/ecma-262/#sec-async-function-definitions",target:"_blank",rel:"noopener noreferrer"}},[s._v("ES8"),n("OutboundLink")],1),s._v(" 已经标准化了 "),n("code",[s._v("async")]),s._v(" 函数，那么 "),n("code",[s._v("Promise")]),s._v(" 对象的链式执行也可使用 "),n("code",[s._v("async")]),s._v(" 函数。")]),s._m(16),s._m(17),n("p",[s._v("（章节 - "),n("router-link",{attrs:{to:"js-async-function.html"}},[s._v("async 函数")]),s._v("）")],1),s._m(18),n("p",[s._v("在不支持 "),n("code",[s._v("Promise")]),s._v(" 原生对象的浏览器中可使用 "),n("a",{attrs:{href:"http://bluebirdjs.com/docs/api/new-promise.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("bluebird"),n("OutboundLink")],1),s._v("（"),n("a",{attrs:{href:"http://www.bootcdn.cn/bluebird/",target:"_blank",rel:"noopener noreferrer"}},[s._v("CDN"),n("OutboundLink")],1),s._v("）。该库 API 实现与原生完全相同。")])])},[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"promise-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#promise-对象","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise 对象")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"promise-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#promise-api","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise API")])},function(){var s=this.$createElement,t=this._self._c||s;return t("ul",[t("li",[this._v("解决 "),t("code",[this._v("回调地狱")]),this._v(" 的问题")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("code",[this._v("promise")]),this._v(" 将 "),t("code",[this._v("callback hell")]),this._v(" 转变为 "),t("code",[this._v("callback")]),t("strong",[this._v("链式调用")]),this._v("。极大增强代码的易读性，并简洁地体现回调函数的逻辑性。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{attrs:{class:"token function-variable function"}},[s._v("getSomeData")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Promise")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resolve"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" xhr "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("XMLHttpRequest")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("open")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'GET'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" url"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[s._v("onreadystatechange")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("readyState "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("4")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status "),n("span",{attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("200")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status "),n("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("300")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("||")]),s._v(" xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("304")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("responseText"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{attrs:{class:"token function"}},[s._v("reject")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    xhr"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("send")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("null")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" request "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token string"}},[s._v("'https://example.com'")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 链式调用回调函数，逻辑更为清晰")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// catch 本质为 then(undefined, onRejected) 的语法糖")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("getSomeData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("error")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 等价于")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("getSomeData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("error")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ul",[n("li",[n("code",[s._v("then")]),s._v("、"),n("code",[s._v("catch")]),s._v("、"),n("code",[s._v("finally")]),s._v("中 "),n("code",[s._v("return")]),s._v(" 的值将作为链式调用链中下一个函数中回调函数的"),n("strong",[s._v("参数")]),s._v("，"),n("code",[s._v("Promise.all")]),s._v("、"),n("code",[s._v("Promise.race")]),s._v("中接受的 "),n("code",[s._v("Promise")]),s._v(" 参数将仍然传递给链式调用链的下一个参数。")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'I am resolved'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v('// Promise {<resolved>: "I am resolved"}')]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("/**\n * 1. catch 本身内部没有抛出错误的情况下，返回一个 resolved 的 Promise ，此处 `resolved`\n * 状态表示之前的错误已经被处理\n */")]),s._v("\nPromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("reject")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'I am rejected'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" err"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v('// Promise {<resolved>: "I am rejected"}')]),s._v("\n\nPromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'I am resolved'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v('// Promise {<resolved>: "I am resolved"}')]),s._v("\n\nPromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v("'I am resolved'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// 同上")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// race 用于只要参数数组的任一 Promise 状态改变就立即返回一个同参数中抛出状态一致的 Promise")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 返回 Promise {<resolved>: true}")]),s._v("\nPromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("race")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("reject")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token boolean"}},[s._v("false")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("/**\n * 1. all 用于参数数组每一项均 resolve ，返回一个 resolved 的 Promise；只要有一项为\n * rejected 时，返回一个 rejected 的 Promise\n * 2. 下例返回 Promise {<resolved>: false}\n */")]),s._v("\nPromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("all")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("reject")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token boolean"}},[s._v("false")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" err"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("// Promise 对象的 所有方法 始终返回一个新的 Promise 对象。")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// const promise = Promise.resolve() 同理")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" promise "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Promise")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resolve"),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\npromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Promise")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// true")]),s._v("\npromise "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// false")]),s._v("\n\npromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Promise")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// true")]),s._v("\npromise "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// false")]),s._v("\n\npromise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("instanceof")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Promise")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// true")]),s._v("\npromise "),n("span",{attrs:{class:"token operator"}},[s._v("===")]),s._v(" promise"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// false")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("li",[n("p",[n("code",[s._v("Promise")]),s._v(" 对象的"),n("strong",[s._v("所有")]),s._v("方法"),n("strong",[s._v("始终")]),s._v("返回一个"),n("strong",[s._v("新的")]),n("code",[s._v("Promise")]),s._v(" 对象。")]),n("ol",[n("li",[n("p",[n("code",[s._v("Promise.resolve()")]),s._v(" 返回一个 "),n("code",[s._v("resolved")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象。")])]),n("li",[n("p",[n("code",[s._v("Promise.reject()")]),s._v(" 返回一个 "),n("code",[s._v("rejected")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象。")])]),n("li",[n("p",[n("code",[s._v("Promise.all()")]),s._v(" 只有当参数数组中的各个 "),n("code",[s._v("Promise")]),s._v(" 均改变状态时，才会返回一个定型的 "),n("code",[s._v("Promise")]),s._v(" 对象。否则，为 "),n("code",[s._v("pending")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v("。")]),n("ul",[n("li",[s._v("当参数数组中所有 "),n("code",[s._v("Promise")]),s._v(" 状态均为 "),n("code",[s._v("resolved")]),s._v(" 时，该方法才返回一个 "),n("code",[s._v("resolved")]),s._v(" 状态 "),n("code",[s._v("Promise")]),s._v(" 对象。否则，返回一个 "),n("code",[s._v("rejected")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象。")])])]),n("li",[n("p",[n("code",[s._v("Promise.race()")]),s._v(" 一旦参数数组中某个 "),n("code",[s._v("Promise")]),s._v(" 对象的状态变为 "),n("code",[s._v("resolved")]),s._v(" 或 "),n("code",[s._v("rejected")]),s._v("，该方法就会返回一个与该方法同状态的 "),n("code",[s._v("Promise")]),s._v("，并且其中包含之前 "),n("code",[s._v("Promise")]),s._v(" 对象的返回值。")])]),n("li",[n("p",[s._v("所有原型方法 "),n("code",[s._v("then")]),s._v("、"),n("code",[s._v("catch")]),s._v("、"),n("code",[s._v("finally")]),s._v(" 返回的 "),n("code",[s._v("Promise")]),s._v(" 对象的状态取决与当前方法中函数执行是否有错误抛出。")])])])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("li",[n("p",[n("code",[s._v("Promise")]),s._v(" 对象有 "),n("code",[s._v("pending")]),s._v("，"),n("code",[s._v("fulfilled")]),s._v("（一般用 "),n("code",[s._v("resolved")]),s._v(" 指代），"),n("code",[s._v("rejected")]),s._v(" 三种状态，"),n("code",[s._v("Promise")]),s._v(" 对象的状态改变是"),n("strong",[s._v("不可逆的")]),s._v("。一旦由 "),n("code",[s._v("pending")]),s._v(" 转变为另外两种状态的一种后，就无法通过任何手段再次改变状态了，并且后续生命周期将一直"),n("strong",[s._v("保持该状态不变")]),s._v("。此时称为状态 "),n("code",[s._v("定型")]),s._v("。")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("li",[n("p",[n("code",[s._v("then")]),s._v(" 和 "),n("code",[s._v("catch")]),s._v(" 等函数都只对"),n("strong",[s._v("前一个")]),n("code",[s._v("then")]),s._v(" 或 "),n("code",[s._v("catch")]),s._v(" 返回的 "),n("code",[s._v("Promise")]),s._v(" 进行"),n("strong",[s._v("状态判断")]),s._v("。")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("li",[n("p",[n("code",[s._v("then")]),s._v(" 函数第一参数函数被调用时，默认向后传递一个"),n("strong",[s._v("之前")]),s._v("的 "),n("code",[s._v("Promise")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象，即继承之前的 "),n("code",[s._v("Promise")]),s._v(" 状态。除非在 "),n("code",[s._v("then")]),s._v(" 内部抛出一个错误，否则 "),n("code",[s._v("then")]),s._v(" 传递的 "),n("code",[s._v("Promise")]),s._v(" 状态将"),n("strong",[s._v("维持不变")]),s._v("。")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[t("strong",[this._v("技巧")]),this._v("：")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ol",[n("li",[n("p",[s._v("并不推荐将 "),n("code",[s._v("reject")]),s._v(" 时触发的函数写为 "),n("code",[s._v("then")]),s._v(" 的第二参数，推荐做法是使用 "),n("code",[s._v("catch()")]),s._v(" 函数包裹。这样遵循 "),n("code",[s._v("链式调用")]),s._v(" 的原则，将 "),n("code",[s._v("resolve")]),s._v(" 与 "),n("code",[s._v("reject")]),s._v(" 时调用的回调函数"),n("strong",[s._v("分离")]),s._v("开来。")])]),n("li",[n("p",[n("strong",[s._v("不推荐")]),s._v("在 "),n("code",[s._v("catch")]),s._v(" 中使用 "),n("code",[s._v("{ throw new Error(err) }")]),s._v(" 语法，如果这样做，那么 "),n("code",[s._v("catch")]),s._v(" 将返回一个 "),n("code",[s._v("rejected")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象，那么 "),n("code",[s._v("catch")]),s._v(" 后续的 "),n("code",[s._v("then")]),s._v(" 将与之前的 "),n("code",[s._v("catch")]),s._v(" 函数返回的 "),n("code",[s._v("rejected")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象状态相同（因为没有定义第二参数回调），即都会返回一个 "),n("code",[s._v("rejected")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象。即最终返回的 "),n("code",[s._v("Promise")]),s._v(" 对象将是状态为 "),n("code",[s._v("rejected")]),s._v(" 的 "),n("code",[s._v("Promise")]),s._v(" 对象。浏览器中存在一个未捕获的 "),n("code",[s._v("rejected")]),s._v(" 状态的 "),n("code",[s._v("Promise")]),s._v(" 对象将导致 "),n("code",[s._v("rejected")]),s._v(" 触发浏览器相关 "),n("code",[s._v("uncaught")]),s._v(" 事件，并抛出 "),n("code",[s._v("Uncaught (in promise) ...")]),s._v(" 错误。")])]),n("li",[n("p",[n("strong",[s._v("推荐")]),s._v("在 "),n("code",[s._v("catch")]),s._v(" 中使用 "),n("code",[s._v("console.error(err)")]),s._v(" 可达到同样效果。")])])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"promise-链式执行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#promise-链式执行","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise 链式执行")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("比如需要以特定顺序条件的方式请求资源的"),t("strong",[this._v("一种")]),this._v("实现方式。")])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" vue "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`https://unpkg.com/vue@2.5.16/dist/vue.min.js`")])]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" react "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`https://unpkg.com/react@16/umd/react.production.min.js`")])]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" result "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{attrs:{class:"token function"}},[s._v("getSomeData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    result"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("push")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("getSomeData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("react"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("then")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("// res 是由请求 react 提供")]),s._v("\n    result"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("push")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("res"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err "),n("span",{attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("error")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])])},function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" getResult "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" vue "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`https://unpkg.com/vue@2.5.16/dist/vue.min.js`")])]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" react "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token template-string"}},[n("span",{attrs:{class:"token string"}},[s._v("`https://unpkg.com/react@16/umd/react.production.min.js`")])]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" result "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" vueRes "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("getSomeData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vue"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("const")]),s._v(" reactRes "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("getSomeData")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("react"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  result"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("push")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vueRes"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  result"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("push")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("reactRes"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("getResult")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("这样做的好处就是，可以使用一个 "),t("code",[this._v("async")]),this._v(" 函数将异步操作"),t("strong",[this._v("封装")]),this._v("为一个"),t("strong",[this._v("异步模块")]),this._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"promise-浏览器支持"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#promise-浏览器支持","aria-hidden":"true"}},[this._v("#")]),this._v(" Promise 浏览器支持")])}],!1,null,null,null);t.default=e.exports}}]);